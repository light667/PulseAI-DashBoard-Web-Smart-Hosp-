<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PulseAI ‚Äî Admin - Validation H√¥pitaux</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="./styles.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container-fluid px-4">
        <a class="navbar-brand" href="admin.html">
            <i class="bi bi-shield-check me-2"></i>PulseAI Admin
        </a>
        <div class="d-flex align-items-center gap-3">
            <span class="badge bg-danger">Administrateur</span>
            <button class="btn btn-outline-danger btn-sm" id="btnLogout">
                <i class="bi bi-box-arrow-right"></i> D√©connexion
            </button>
        </div>
    </div>
</nav>

<!-- STATISTIQUES -->
<div class="container-fluid px-4 py-4">
    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="stat-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">En attente</div>
                            <div class="h2 mb-0" id="statPending">0</div>
                        </div>
                        <div class="icon-box">
                            <i class="bi bi-clock-history"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">Approuv√©s</div>
                            <div class="h2 mb-0" id="statApproved">0</div>
                        </div>
                        <div class="icon-box">
                            <i class="bi bi-check-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">Rejet√©s</div>
                            <div class="h2 mb-0" id="statRejected">0</div>
                        </div>
                        <div class="icon-box">
                            <i class="bi bi-x-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small">Total</div>
                            <div class="h2 mb-0" id="statTotal">0</div>
                        </div>
                        <div class="icon-box">
                            <i class="bi bi-hospital"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ONGLETS -->
    <ul class="nav nav-pills mb-4">
        <li class="nav-item">
            <button class="nav-link active" id="tab-pending" data-bs-toggle="tab" data-bs-target="#pane-pending">
                En attente <span class="badge bg-warning ms-2" id="badgePending">0</span>
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="tab-approved" data-bs-toggle="tab" data-bs-target="#pane-approved">
                Approuv√©s <span class="badge bg-success ms-2" id="badgeApproved">0</span>
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="tab-rejected" data-bs-toggle="tab" data-bs-target="#pane-rejected">
                Rejet√©s <span class="badge bg-danger ms-2" id="badgeRejected">0</span>
            </button>
        </li>
    </ul>

    <!-- CONTENU DES ONGLETS -->
    <div class="tab-content">
        <div class="tab-pane fade show active" id="pane-pending">
            <div id="pendingList" class="row">
                <!-- Cartes inject√©es par JavaScript -->
            </div>
        </div>
        <div class="tab-pane fade" id="pane-approved">
            <div id="approvedList" class="row">
                <!-- Cartes inject√©es par JavaScript -->
            </div>
        </div>
        <div class="tab-pane fade" id="pane-rejected">
            <div id="rejectedList" class="row">
                <!-- Cartes inject√©es par JavaScript -->
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="../src/admin_panel.js"></script>

</body>
</html>

.btn-reject {
    background: #ef4444;
    color: white;
}

.btn-reject:hover {
    background: #dc2626;
}

.btn-delete {
    background: #6b7280;
    color: white;
}

.btn-delete:hover {
    background: #4b5563;
}

.rejection-reason {
    background: #fee2e2;
    color: #991b1b;
    padding: 12px;
    border-radius: 8px;
    margin: 12px 0;
    border-left: 4px solid #ef4444;
}

.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 16px 24px;
    border-radius: 8px;
    background: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.notification.fade-out {
    animation: fadeOut 0.3s ease;
}

@keyframes fadeOut {
    to { opacity: 0; transform: translateX(400px); }
}

.notification-success { border-left: 4px solid #10b981; }
.notification-warning { border-left: 4px solid #f59e0b; }
.notification-danger { border-left: 4px solid #ef4444; }

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}
</style>
</head>
<body>
<main class="container">
<h1>üè• PulseAI ‚Äî Administration</h1>

<div class="tabs">
    <button class="tab active" onclick="switchTab('pending')">
        ‚è≥ En attente 
        <span class="tab-badge" id="pendingCount">0</span>
    </button>
    <button class="tab" onclick="switchTab('approved')">
        ‚úÖ Approuv√©s 
        <span class="tab-badge" id="approvedCount">0</span>
    </button>
    <button class="tab" onclick="switchTab('rejected')">
        ‚ùå Rejet√©s 
        <span class="tab-badge" id="rejectedCount">0</span>
    </button>
</div>

<div id="pending-content" class="tab-content active">
    <section class="card">
        <h2>H√¥pitaux en attente de validation</h2>
        <div id="pendingList"></div>
    </section>
</div>

<div id="approved-content" class="tab-content">
    <section class="card">
        <h2>H√¥pitaux approuv√©s</h2>
        <div id="approvedList"></div>
    </section>
</div>

<div id="rejected-content" class="tab-content">
    <section class="card">
        <h2>H√¥pitaux rejet√©s</h2>
        <div id="rejectedList"></div>
    </section>
</div>

</main>

<script type="module" src="./src/supabase.js?v=11"></script>
<script type="module" src="./src/admin_panel.js?v=11"></script>
<script>
function switchTab(tab) {
    // D√©sactiver tous les onglets
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'))
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'))
    
    // Activer l'onglet s√©lectionn√©
    event.target.closest('.tab').classList.add('active')
    document.getElementById(tab + '-content').classList.add('active')
}
</script>
</body>
</html>